<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lunar Chits: Midnight Syndicate üåô</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #050505; --card-bg: rgba(20, 20, 20, 0.8);
            --police: #007aff; --thief: #ff3b30; --king: #ffcc00; --minister: #af52de;
            --accent: #00ffcc; --border: rgba(255, 255, 255, 0.08);
        }

        body { 
            background: var(--bg); color: #fff; margin: 0; 
            font-family: 'Outfit', sans-serif; height: 100vh; 
            height: -webkit-fill-available; overflow: hidden; 
            display: flex; flex-direction: column;
            background-image: radial-gradient(circle at 50% -20%, #1a1a1a 0%, #050505 100%);
        }

        /* --- MODERN LEADERBOARD --- */
        #leaderboard {
            background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
            padding: 10px 5px; border-bottom: 1px solid var(--border);
            display: flex; justify-content: center; gap: 8px; flex-shrink: 0;
            width: 100%; box-sizing: border-box;
        }
        .rank-item { 
            background: var(--card-bg); padding: 8px 6px; border-radius: 12px;
            border: 1px solid var(--border); flex: 1; max-width: 85px; text-align: center;
        }
        .rank-item div:first-child { 
            font-size: 8px; text-transform: uppercase; opacity: 0.6; 
            letter-spacing: 0.5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .rank-item div:last-child { font-weight: 800; font-size: 13px; color: var(--accent); }
        .rank-first { border-color: var(--king); box-shadow: 0 0 15px rgba(255, 204, 0, 0.1); }

        #round-info {
            text-align: center; font-size: 10px; padding: 8px;
            letter-spacing: 3px; font-weight: 600; color: rgba(255,255,255,0.4);
        }

        /* --- OVERLAYS --- */
        .full-overlay { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 5000; 
            display: flex; justify-content: center; align-items: center; padding: 25px;
            backdrop-filter: blur(8px);
        }
        .lunar-card {
            background: #111; border: 1px solid var(--border); padding: 30px;
            border-radius: 24px; text-align: center; width: 100%; max-width: 340px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .btn-main {
            background: #fff; color: #000; border: none; padding: 16px;
            border-radius: 16px; font-weight: 800; width: 100%; cursor: pointer;
            font-size: 15px; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px;
        }
        .btn-main:active { transform: scale(0.96); }

        /* --- GAME GRID --- */
        #log-flow { 
            flex: 1; overflow-y: auto; padding: 20px; display: flex; 
            flex-direction: column; gap: 10px;
        }
        .msg { 
            padding: 12px 16px; background: var(--card-bg); border-radius: 14px; 
            font-size: 13px; border-left: 3px solid #333; animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        
        #player-grid { 
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px; 
            padding: 20px; background: rgba(0,0,0,0.3); border-radius: 30px 30px 0 0;
        }
        .p-card { 
            background: var(--card-bg); border: 1px solid var(--border); 
            padding: 20px 10px; border-radius: 20px; text-align: center; position: relative;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .status-dot { position: absolute; top: 8px; right: 8px; width: 6px; height: 6px; border-radius: 50%; background: #444; }
        .status-online { background: var(--accent); box-shadow: 0 0 5px var(--accent); }

        .p-card.clickable { 
            border: 1px solid var(--police); background: rgba(0, 122, 255, 0.05);
            animation: pulsePolice 2s infinite; cursor: pointer;
        }
        @keyframes pulsePolice { 0% { box-shadow: 0 0 0 0 rgba(0, 122, 255, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(0, 122, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 122, 255, 0); } }
        
        .role-badge { font-weight: 800; font-size: 18px; margin-top: 5px; letter-spacing: -0.5px; }

        /* --- SHUFFLE --- */
        #shuffle-zone {
            position: fixed; inset: 0; background: var(--bg); z-index: 6000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
        }
        .chit-stack { position: relative; width: 60px; height: 80px; }
        .chit { 
            position: absolute; width: 60px; height: 80px; background: #fff; 
            border-radius: 8px; border: 2px solid #000;
        }
        .chit:nth-child(1) { animation: shuffle1 0.6s infinite; }
        .chit:nth-child(2) { animation: shuffle2 0.6s infinite; }
        @keyframes shuffle1 { 0%, 100% { transform: translate(0,0) rotate(0); z-index: 1; } 50% { transform: translate(40px, -20px) rotate(15deg); z-index: 2; } }
        @keyframes shuffle2 { 0%, 100% { transform: translate(0,0) rotate(0); z-index: 2; } 50% { transform: translate(-40px, 20px) rotate(-15deg); z-index: 1; } }

        /* --- CHIT REVEAL --- */
        .reveal-emoji-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-top: 25px; }
        .emoji-btn { 
            font-size: 22px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); 
            border-radius: 12px; padding: 12px 5px; cursor: pointer; transition: 0.2s;
        }
        .emoji-btn:hover { background: rgba(255,255,255,0.1); transform: translateY(-3px); }

        .chit-paper { 
            width: 160px; height: 220px; background: #fff; color: #000; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-radius: 12px; transform: rotate(-2deg);
            box-shadow: 0 10px 40px rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>

<div id="leaderboard"></div>
<div id="round-info">SYNDICATE SESSION</div>

<div id="log-flow"></div>

<div id="player-grid">
    <div class="p-card" id="card-p1">
        <div class="status-dot status-online"></div>
        <div style="font-size:9px; opacity:0.5; letter-spacing:1px;">YOU</div>
        <div id="my-role" class="role-badge">?</div>
    </div>
    <div class="p-card locked" id="card-p2" onclick="policeGuess('p2')">
        <div id="p2-dot" class="status-dot"></div>
        <div id="p2-name-label" style="font-size:9px; opacity:0.5;">WAITING...</div>
        <div id="p2-role" class="role-badge">?</div>
    </div>
    <div class="p-card locked" id="card-bot1" onclick="policeGuess('bot1')">
        <div class="status-dot status-online"></div>
        <div style="font-size:9px; opacity:0.5;">BOT ALPHA</div>
        <div id="bot1-role" class="role-badge">?</div>
    </div>
    <div class="p-card locked" id="card-bot2" onclick="policeGuess('bot2')">
        <div class="status-dot status-online"></div>
        <div style="font-size:9px; opacity:0.5;">BOT ZETA</div>
        <div id="bot2-role" class="role-badge">?</div>
    </div>
</div>

<div id="overlay-name" class="full-overlay">
    <div class="lunar-card">
        <h2 style="margin-top:0; font-weight:800;">MIDNIGHT SYNDICATE</h2>
        <p style="font-size:12px; opacity:0.6; margin-bottom:20px;">Enter the void to begin your session.</p>
        <input type="text" id="name-in" placeholder="IDENTIFIER" style="width:100%; padding:18px; border-radius:15px; border:1px solid #333; background:#000; color:#fff; margin-bottom:20px; text-align:center; box-sizing:border-box; font-family:'JetBrains Mono';">
        <button class="btn-main" onclick="saveName()">INITIALIZE</button>
    </div>
</div>

<div id="overlay-invite" class="full-overlay" style="display:none;">
    <div class="lunar-card">
        <h2>RECRUIT ASSET</h2>
        <div id="invite-link-display" style="background: #000; padding: 15px; border-radius: 12px; font-family: 'JetBrains Mono'; font-size: 10px; border: 1px dashed #444; margin: 20px 0; word-break: break-all;">...</div>
        <button id="copy-btn" class="btn-main" onclick="copyInvite()" style="margin-bottom:10px;">COPY LINK</button>
        <button class="btn-main" style="background:#25D366; color:#fff;" onclick="shareWA()">WHATSAPP RECRUIT</button>
    </div>
</div>

<div id="overlay-reveal" class="full-overlay" style="display:none;">
    <div style="display:flex; flex-direction:column; align-items:center; width: 100%; max-width: 320px;">
        <div class="chit-paper">
            <div id="chit-mark-text" style="font-size:28px; font-weight:900; text-transform:uppercase;">...</div>
            <div style="font-size:10px; opacity:0.4; margin-top:8px; font-weight:600; letter-spacing:1px;">ASSIGNED ROLE</div>
        </div>
        <div class="reveal-emoji-grid">
            <button class="emoji-btn" onclick="sendEmoji('üëë')">üëë</button>
            <button class="emoji-btn" onclick="sendEmoji('üòé')">üòé</button>
            <button class="emoji-btn" onclick="sendEmoji('üò±')">üò±</button>
            <button class="emoji-btn" onclick="sendEmoji('üòÇ')">üòÇ</button>
            <button class="emoji-btn" onclick="sendEmoji('ü§´')">ü§´</button>
        </div>
    </div>
</div>

<div id="overlay-summary" class="full-overlay" style="display:none;">
    <div class="lunar-card">
        <h2 style="margin:0 0 20px 0;">INTELLIGENCE REPORT</h2>
        <div id="summary-content" style="text-align:left; font-size:14px; line-height:1.8;"></div>
        <div id="sync-status" style="margin: 15px 0; font-size: 11px; color: var(--accent); font-weight: bold;"></div>
        <button id="next-round-btn" class="btn-main" onclick="markPlayerReady()">READY UP</button>
    </div>
</div>

<div id="shuffle-zone">
    <div class="chit-stack"><div class="chit"></div><div class="chit"></div></div>
    <h3 style="margin-top:30px; letter-spacing:5px; font-weight:300; opacity:0.7;">RE-ROUTING ROLES</h3>
</div>

<script>
window.onload = () => {
    const savedName = localStorage.getItem('syndicate_name');
    if(savedName) document.getElementById('name-in').value = savedName;
};

// --- CORE CONFIG ---
const firebaseConfig = {
    apiKey: "AIzaSyCkpSNJP6-puaQsB9H5ZX_pp9alrbR58lI",
    authDomain: "pinga-8bba9.firebaseapp.com",
    databaseURL: "https://pinga-8bba9-default-rtdb.firebaseio.com",
    projectId: "pinga-8bba9",
    storageBucket: "pinga-8bba9.firebasestorage.app",
    messagingSenderId: "751196556015",
    appId: "1:751196556015:web:504f02ccc79778c41da91a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let role, matchRef, myName = "", currentRound = 0, lastEmojiTs = 0;
let scores = { p1: 0, p2: 0, bot1: 0, bot2: 0 };
let currentAssigns = {};
let emojiCount = 0;
let botsHaveEmojied = false;
let botsWhoReacted = new Set();
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playSound(type) {
    const osc = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    osc.connect(g); g.connect(audioCtx.destination);
    const now = audioCtx.currentTime;

    if (type === 'shuffle') {
        osc.type = 'sawtooth'; osc.frequency.setValueAtTime(100, now);
        osc.frequency.linearRampToValueAtTime(30, now + 0.5);
        g.gain.setValueAtTime(0.05, now); g.gain.linearRampToValueAtTime(0, now + 0.5);
    } else if (type === 'reveal') {
        osc.type = 'sine'; osc.frequency.setValueAtTime(800, now);
        g.gain.setValueAtTime(0.1, now); g.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
    } else if (type === 'correct') {
        osc.frequency.setValueAtTime(400, now); osc.frequency.setValueAtTime(600, now + 0.1);
        g.gain.setValueAtTime(0.1, now); g.gain.linearRampToValueAtTime(0, now + 0.3);
    }
    osc.start(); osc.stop(now + 0.5);
}

function saveName() {
    if (audioCtx.state === 'suspended') audioCtx.resume();
    const inputVal = document.getElementById('name-in').value;
    myName = inputVal || "Agent_" + Math.floor(Math.random()*99);
    localStorage.setItem('syndicate_name', myName);
    
    document.getElementById('overlay-name').style.display = 'none';
    const params = new URLSearchParams(window.location.search);
    const mId = params.get('m');
    
    if(mId) {
        role = 'p2';
        matchRef = db.ref("syndicate/" + mId);
        matchRef.update({ p2N: myName, p2Active: true });
        matchRef.onDisconnect().update({ p2Active: false });
    } else {
        role = 'p1';
        const newId = Math.random().toString(36).substring(2, 7);
        matchRef = db.ref("syndicate/" + newId);
        const link = window.location.origin + window.location.pathname + "?m=" + newId;
        document.getElementById('invite-link-display').innerText = link;
        document.getElementById('overlay-invite').style.display = 'flex';
        matchRef.set({ 
            p1N: myName, p2N: "WAITING...", round: 0, status: 'LOBBY', 
            scores: {p1:0, p2:0, bot1:0, bot2:0}, p1Ready: false, p2Ready: false,
            p1Active: true, p2Active: false 
        });
        matchRef.onDisconnect().update({ p1Active: false });
    }
    initSync();
}

function initSync() {
    matchRef.on('value', snap => {
        const d = snap.val(); if(!d) return;
        
        const p2Dot = document.getElementById('p2-dot');
        if(d.p2Active) p2Dot.classList.add('status-online'); else p2Dot.classList.remove('status-online');

        if(d.p2N !== "WAITING...") {
            if(role === 'p1') document.getElementById('overlay-invite').style.display = 'none';
            document.getElementById('p2-name-label').innerText = (role === 'p1' ? d.p2N : d.p1N);
        }
        
        if(d.status === 'LOBBY' && d.p2N !== "WAITING..." && role === 'p1') startNewRound(1);
        
        document.getElementById('shuffle-zone').style.display = (d.status === 'SHUFFLING') ? 'flex' : 'none';
        if(d.status === 'SHUFFLING') playSound('shuffle');
        
        if(d.round !== currentRound && d.round > 0) {
            currentRound = d.round;
            document.getElementById('round-info').innerText = `SESSION ROUND: ${currentRound} / 20`;
            scores = d.scores;
            currentAssigns = d.assignments;
            emojiCount = 0; botsHaveEmojied = false; botsWhoReacted.clear();
            updateLeaderboard();
            displayChitReveal(d.assignments[role]);
            unlockGuessing(false);
            document.getElementById('overlay-summary').style.display = 'none';
            document.getElementById('next-round-btn').style.display = 'block';
            document.getElementById('my-role').innerText = '?';
            document.getElementById('my-role').style.color = '#fff';
        }
        
        if(d.lastEmoji && d.lastEmoji.ts > lastEmojiTs) {
            lastEmojiTs = d.lastEmoji.ts;
            displayEmoji(d.lastEmoji);
            emojiCount++;
            if(emojiCount >= 4 && currentAssigns[role] === 'Police') unlockGuessing(true);
        }

        if(d.status === 'RESULTS') {
            showSummary(d.assignments, d.lastGain, d.guessData);
            if (d[role + 'Ready'] && !d[ (role === 'p1' ? 'p2' : 'p1') + 'Ready' ]) {
                document.getElementById('sync-status').innerText = "WAITING FOR PARTNER...";
                document.getElementById('next-round-btn').style.display = 'none';
            }
            if(d.p1Ready && d.p2Ready && role === 'p1') {
                setTimeout(() => startNewRound(currentRound + 1), 1500);
            }
        }
    });
}

function botBluff(botId) {
    if(role !== 'p1') return;
    if(botsWhoReacted.has(botId)) return;
    botsWhoReacted.add(botId);
    const emojis = ['üëë', 'üòé', 'üò±', 'üòÇ', 'ü§´'];
    const chosen = emojis[Math.floor(Math.random() * emojis.length)];
    matchRef.update({ lastEmoji: { sender: botId === 'bot1' ? 'ALPHA' : 'ZETA', icon: chosen, ts: Date.now() } });
    if(currentAssigns[botId] === 'Police') {
        const waitTime = (botId === 'bot1') ? 2000 : 4000;
        setTimeout(() => {
            matchRef.get().then(snap => {
                const d = snap.val();
                if(d.status !== 'RESULTS') {
                    const targets = ['p1', 'p2', 'bot1', 'bot2'].filter(p => p !== botId);
                    policeGuess(targets[Math.floor(Math.random()*3)], botId);
                }
            });
        }, waitTime);
    }
}

function displayChitReveal(r) {
    playSound('reveal');
    document.getElementById('log-flow').innerHTML = "";
    const mark = document.getElementById('chit-mark-text');
    mark.innerText = r;
    mark.style.color = (r === 'Police') ? 'var(--police)' : (r === 'Thief' ? 'var(--thief)' : '#000');
    document.getElementById('overlay-reveal').style.display = 'flex';
}

function sendEmoji(e) {
    matchRef.update({ lastEmoji: { sender: myName, icon: e, ts: Date.now() }, status: 'GUESSING' });
    document.getElementById('overlay-reveal').style.display = 'none';
    const me = document.getElementById('my-role');
    me.innerText = currentAssigns[role];
    me.style.color = (currentAssigns[role] === 'Police') ? 'var(--police)' : (currentAssigns[role] === 'Thief' ? 'var(--thief)' : '#fff');
    if (role === 'p1' && !botsHaveEmojied) {
        botsHaveEmojied = true;
        setTimeout(() => botBluff('bot1'), 1000 + Math.random()*1000);
        setTimeout(() => botBluff('bot2'), 2500 + Math.random()*1000);
    }
}

function displayEmoji(data) {
    const log = document.getElementById('log-flow');
    const div = document.createElement('div');
    div.className = 'msg';
    div.innerHTML = `<span style="color:var(--accent); font-weight:800; font-size:10px;">${data.sender}:</span> <span style="font-size:18px;">${data.icon}</span>`;
    log.appendChild(div);
    log.scrollTop = log.scrollHeight;
}

function updateLeaderboard() {
    const sorted = Object.entries(scores).sort((a,b) => b[1] - a[1]);
    const lb = document.getElementById('leaderboard');
    lb.innerHTML = '';
    sorted.forEach(([id, val], i) => {
        let n = "BOT";
        if(id === 'p1') n = "YOU";
        else if(id === 'p2') n = document.getElementById('p2-name-label').innerText;
        else if(id === 'bot1') n = "ALPHA";
        else if(id === 'bot2') n = "ZETA";
        lb.innerHTML += `<div class="rank-item ${i===0?'rank-first':''}"><div>${n}</div><div>${val}</div></div>`;
    });
}

function unlockGuessing(unlock) {
    if(currentAssigns[role] !== 'Police') unlock = false; 
    ['p1','p2','bot1','bot2'].forEach(id => {
        const el = document.getElementById('card-' + id);
        if(unlock && id !== role) {
            el.classList.add('clickable');
        } else {
            el.classList.remove('clickable');
        }
    });
}

function policeGuess(targetId, actingPoliceId = null) {
    matchRef.get().then(snap => {
        const d = snap.val();
        const activePoliceKey = actingPoliceId || role;
        if(d.assignments[activePoliceKey] !== 'Police' || d.status === 'RESULTS') return;
        
        const thiefId = Object.keys(d.assignments).find(k => d.assignments[k] === 'Thief');
        let newScores = {...d.scores}, gain = { p1:0, p2:0, bot1:0, bot2:0 };
        
        let pName = activePoliceKey === 'p1' ? "YOU" : (activePoliceKey === 'p2' ? d.p2N : (activePoliceKey === 'bot1' ? 'ALPHA' : 'ZETA'));
        let tName = targetId === 'p1' ? "YOU" : (targetId === 'p2' ? d.p2N : (targetId === 'bot1' ? 'ALPHA' : 'ZETA'));
        
        let correct = (targetId === thiefId);
        if(correct) gain[activePoliceKey] = 1500; else gain[thiefId] = 1500;
        
        gain[Object.keys(d.assignments).find(k => d.assignments[k]==='King')] = 1000;
        gain[Object.keys(d.assignments).find(k => d.assignments[k]==='Minister')] = 800;
        
        for(let p in gain) newScores[p] += gain[p];
        
        matchRef.update({ 
            scores: newScores, lastGain: gain, status: 'RESULTS',
            guessData: { police: pName, target: tName, correct: correct },
            p1Ready: false, p2Ready: false 
        });
    });
}

function showSummary(assigns, gains, gData) {
    const content = document.getElementById('summary-content');
    content.innerHTML = `<div style="padding:15px; background:rgba(255,255,255,0.05); border-radius:15px; margin-bottom:15px;">
        <span style="color:var(--police)">${gData.police}</span> targeted <span style="color:var(--thief)">${gData.target}</span><br>
        <b>RESULT:</b> ${gData.correct ? 'HUNT SUCCESSFUL üéØ' : 'HUNT FAILED ‚ùå'}</div>`;
    
    for(let p in assigns) {
        let n = "BOT";
        if(p === 'p1') n = "YOU";
        else if(p === 'p2') n = document.getElementById('p2-name-label').innerText;
        else if(p === 'bot1') n = "ALPHA";
        else if(p === 'bot2') n = "ZETA";
        
        let roleColor = '#fff';
        if(assigns[p] === 'Police') roleColor = 'var(--police)';
        else if(assigns[p] === 'Thief') roleColor = 'var(--thief)';
        else if(assigns[p] === 'King') roleColor = 'var(--king)';
        else if(assigns[p] === 'Minister') roleColor = 'var(--minister)';

        content.innerHTML += `<div style="display:flex; justify-content:space-between; margin-bottom:5px;">
            <span>${n}: <b style="color:${roleColor}">${assigns[p]}</b></span> <span style="color:var(--accent)">+${gains[p]}</span></div>`;
    }
    document.getElementById('overlay-summary').style.display = 'flex';
}

function startNewRound(r) {
    if(r > 20) { matchRef.update({ status: 'FINISHED' }); return; }
    matchRef.update({ status: 'SHUFFLING', lastEmoji: null, p1Ready: false, p2Ready: false });
    setTimeout(() => {
        const pool = ['Police', 'Thief', 'King', 'Minister'].sort(() => Math.random() - 0.5);
        matchRef.update({ 
            round: r, 
            assignments: { p1: pool[0], p2: pool[1], bot1: pool[2], bot2: pool[3] },
            status: 'EMOJI_PHASE', lastEmoji: null 
        });
    }, 2500);
}

function markPlayerReady() { 
    playSound('correct');
    let up = {}; up[role + 'Ready'] = true; matchRef.update(up); 
    document.getElementById('sync-status').innerText = "WAITING FOR PARTNER...";
    document.getElementById('next-round-btn').style.display = 'none';
}

function copyInvite() {
    const textToCopy = document.getElementById('invite-link-display').innerText;
    const btn = document.getElementById('copy-btn');
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(textToCopy).then(() => {
            btn.innerText = "COPIED";
            setTimeout(() => btn.innerText = "COPY LINK", 2000);
        }).catch(() => fallbackCopy(textToCopy, btn));
    } else fallbackCopy(textToCopy, btn);
}

function fallbackCopy(text, btn) {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.position = "fixed";
    textArea.style.left = "-9999px";
    textArea.style.top = "0";
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    try {
        if (document.execCommand('copy')) {
            btn.innerText = "COPIED";
            setTimeout(() => btn.innerText = "COPY LINK", 2000);
        }
    } catch (err) {}
    document.body.removeChild(textArea);
}

function shareWA() {
    window.open(`https://wa.me/?text=Join the Syndicate: ${document.getElementById('invite-link-display').innerText}`);
}
</script>
</body>
</html>
